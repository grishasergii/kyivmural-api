---
openapi: 3.0.1
info:
  title: Kyivmural API
  description: Kyivmural API
  version: 0.1.0

paths:
  /murals:
    get:
      summary: Returns a list of murals
      responses:
        "200":
          description: A JSON array of mural ids
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  format: uuid
      security:
        - AwsIamAuthorizer: []

    post:
      summary: Add a new mural
      requestBody:
        description: Mural objects to be added
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Mural"
        required: true
      responses:
        "201":
          description: Successful operation
        "400":
          description: Bad request, invalid body
        "401":
          description: Bad request, authentication problem
        "409":
          description: Bad request, conflict
        "500":
          desription: Internal server error
      security:
        - AwsIamAuthorizer: []


components:
  schemas:
    Mural:
      type: object
      properties:
        id:
          type: string
          format: uuid
        artist_name_en:
          type: string
          nullable: true
        thumbnail:
          type: string
          format: uri
        photos:
          type: array
          items:
            $ref: "#/components/schemas/MuralPhoto"
        description:
          type: object
          properties:
            en:
              $ref: "#/components/schemas/MuralDescription"
            uk:
              $ref: "#/components/schemas/MuralDescription"
        status:
          type: string
          description: Mural Status
          enum:
            - active
            - removed
        geo_position:
          $ref: "#/components/schemas/GeoPosition"
    GeoPosition:
      type: object
      properties:
        latitude:
          type: number
          format: float
        longitude:
          type: number
          format: float
    MuralPhoto:
      type: object
      properties:
        uri:
          type: string
          format: uri
        author_name:
          type: string
          nullable: true
        author_url:
          type: string
          nullable: true
    MuralDescription:
      type: object
      properties:
        address:
          type: string
        name:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
  securitySchemes:
    AwsIamAuthorizer:
      type: apiKey
      name: Authorization
      in: header
      x-amazon-apigateway-authtype: awsSigv4
